(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e400"],{"23ba":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"c",function(){return r}),o.d(e,"d",function(){return s}),o.d(e,"b",function(){return d});o("7f7f");var a=o("66df"),n=function(t){var e=t.name,o=t.type,n=t.userId;return a["a"].request({url:"/api/group/create_group",data:{name:e,type:o,userId:n},method:"post"})},r=function(t){var e=t.limit,o=void 0===e?20:e,n=t.offset,r=void 0===n?1:n,s=t.keyword,d=t.type;return a["a"].request({url:"/api/group/read_group_list",params:{limit:o,offset:r,isSuper:1,keyword:s,type:d},method:"get"})},s=function(t){var e=t.id,o=t.name,n=t.type;return a["a"].request({url:"/api/group/update_group_by_id",method:"post",data:{id:e,name:o,type:n}})},d=function(t,e){return a["a"].request({url:"/api/group/delete_group_by_id",method:"post",data:{id:t,status:e}})}},"3efa":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"d",function(){return r}),o.d(e,"c",function(){return s}),o.d(e,"e",function(){return d}),o.d(e,"b",function(){return i});var a=o("66df"),n=function(t){var e=t.title,o=t.content,n=t.groupId,r=t.media,s=t.authorId,d=void 0===s?1:s;return a["a"].request({url:"/api/todo/create_todo",data:{title:e,content:o,groupId:n,authorId:d,media:r},method:"post"})},r=function(t){var e=t.limit,o=void 0===e?20:e,n=t.offset,r=void 0===n?1:n,s=t.keyword;return a["a"].request({url:"/api/todo/read_todo_list",params:{limit:o,offset:r,isSuper:1,keyword:s},method:"get"})},s=function(t){return a["a"].request({url:"/api/todo/read_todo_by_id",method:"get",params:{id:t}})},d=function(t){var e=t.groupId,o=t.id,n=t.title,r=t.content;return a["a"].request({url:"/api/todo/update_todo_by_id",method:"post",data:{id:o,title:n,content:r,groupId:e}})},i=function(t,e){return a["a"].request({url:"/api/todo/delete_todo_by_id",method:"post",data:{id:t,status:e}})}},6312:function(t,e,o){},7328:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Card",[o("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:""}},[o("FormItem",{attrs:{prop:"user"}},[o("i-input",{staticStyle:{width:"400px"},attrs:{type:"text",clearable:"",placeholder:"输入关键字搜索"},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),o("FormItem",[o("Button",{on:{click:function(e){t.searchHandler("formInline")}}},[t._v("搜索")])],1),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建")])],1)],1),o("Table",{attrs:{data:t.tableData,columns:t.columns,stripe:""}}),o("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[o("div",{staticStyle:{float:"right"}},[o("Page",{attrs:{total:t.total,current:1,"page-size":20},on:{"on-change":t.changePage}})],1)])],1),o("Modal",{attrs:{title:"创建"},on:{"on-ok":t.createHandler,"on-cancel":function(e){t.showCreate=!1}},model:{value:t.showCreate,callback:function(e){t.showCreate=e},expression:"showCreate"}},[o("Form",{attrs:{model:t.todoInfo,"label-width":80}},[o("FormItem",{attrs:{label:"标题"}},[o("Input",{model:{value:t.todoInfo.title,callback:function(e){t.$set(t.todoInfo,"title",e)},expression:"todoInfo.title"}})],1),o("FormItem",{attrs:{label:"分组"}},[o("Select",{model:{value:t.todoInfo.groupId,callback:function(e){t.$set(t.todoInfo,"groupId",e)},expression:"todoInfo.groupId"}},t._l(t.groupList,function(e,a){return o("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),o("FormItem",{attrs:{label:"日期"}},[o("Row",[o("i-col",{attrs:{span:"11"}},[o("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm"},model:{value:t.todoInfo.createdDate,callback:function(e){t.$set(t.todoInfo,"createdDate",e)},expression:"todoInfo.createdDate"}})],1)],1)],1),o("FormItem",{attrs:{label:"内容"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.todoInfo.content,callback:function(e){t.$set(t.todoInfo,"content",e)},expression:"todoInfo.content"}})],1)],1)],1),o("Modal",{attrs:{title:"修改"},on:{"on-ok":t.updateHandler,"on-cancel":function(e){t.showUpdate=!1}},model:{value:t.showUpdate,callback:function(e){t.showUpdate=e},expression:"showUpdate"}},[o("Form",{attrs:{model:t.todoInfo,"label-width":80}},[o("FormItem",{attrs:{label:"标题"}},[o("Input",{model:{value:t.todoInfo.title,callback:function(e){t.$set(t.todoInfo,"title",e)},expression:"todoInfo.title"}})],1),o("FormItem",{attrs:{label:"分组"}},[o("Select",{model:{value:t.todoInfo.groupId,callback:function(e){t.$set(t.todoInfo,"groupId",e)},expression:"todoInfo.groupId"}},t._l(t.groupList,function(e,a){return o("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),o("FormItem",{attrs:{label:"日期"}},[o("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm"},model:{value:t.todoInfo.createdDate,callback:function(e){t.$set(t.todoInfo,"createdDate",e)},expression:"todoInfo.createdDate"}})],1),o("FormItem",{attrs:{label:"内容"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.todoInfo.content,callback:function(e){t.$set(t.todoInfo,"content",e)},expression:"todoInfo.content"}})],1)],1)],1)],1)},n=[],r=o("3efa"),s=(o("2f62"),o("23ba")),d={name:"todo_list_page",components:{},data:function(){var t=this;return{searchForm:{keyword:""},groupList:[],showCreate:!1,showUpdate:!1,todoInfo:{title:"",content:"",createdDate:"",groupId:1},columns:[{title:"标题",key:"title"},{title:"内容",key:"content"},{title:"分组",key:"groupName"},{title:"作者",key:"author"},{title:"日期",key:"createdDate",sortable:!0},{title:"状态",key:"status",render:function(t,e){return t("span",{style:{color:1===e.row.status?"#5cadff":"#ed4014"}},1===e.row.status?"已完成":"未完成")}},{title:"操作",key:"actions",width:250,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"default",size:"small"},style:{marginRight:"8px"},on:{click:function(){Object(r["c"])(o.row.id).then(function(e){0===e.data.ret?(t.showUpdate=!0,t.todoInfo=e.data.todo[0]):t.$Message.error(e.data.msg)})}}},"编辑"),e("Button",{props:{type:"default",size:"small"},on:{click:function(){t.deleteHandler(o.row.id,1===o.row.status?0:1)}}},1===o.row.status?"未完成":"已完成")])}}],tableData:[],total:0}},created:function(){this.readTodoList(),this.readGroupList()},methods:{changePage:function(){},readTodoList:function(){var t=this;Object(r["d"])({limit:20,offset:1,keyword:this.searchForm.keyword,isSuper:1}).then(function(e){0===e.data.ret?(t.tableData=e.data.rows,t.total=e.data.total):t.$Message.success(e.data.msg)}).catch(function(e){t.$Message.success(e.message)})},createHandler:function(){var t=this;Object(r["a"])(this.todoInfo).then(function(e){0===e.data.ret?(t.readTodoList(),t.$Message.success("操作成功"),t.todoInfo={},t.showCreate=!1):t.$Message.error(e.data.msg)})},searchHandler:function(){this.readTodoList()},deleteHandler:function(t,e){var o=this;Object(r["b"])(t,e).then(function(t){0===t.data.ret?(o.$Message.success("操作成功"),o.readTodoList()):o.$Message.success(t.data.msg)})},updateHandler:function(){var t=this;Object(r["e"])(this.todoInfo).then(function(e){0===e.data.ret?(t.$Message.success("操作成功"),t.todoInfo={},t.showUpdate=!1,t.readTodoList()):t.$Message.success(e.data.msg)})},readGroupList:function(){var t=this;Object(s["c"])({limit:20,offset:1,type:2}).then(function(e){0===e.data.ret&&(t.groupList=e.data.rows)})}}},i=d,u=(o("b7a0"),o("2877")),c=Object(u["a"])(i,a,n,!1,null,null,null);c.options.__file="todo_list.vue";e["default"]=c.exports},b7a0:function(t,e,o){"use strict";var a=o("6312"),n=o.n(a);n.a}}]);